## 阿里QA

## 1. 工作空间

1. 目前的问题， 首先阿里的测试环境再uat企业，绑定了uat环境 C30000这个企业

2. 如果要登陆需要配置host

   47.98.45.205  qci2.aliyun.com (uat使用qci2这个网址登陆)，

   116.62.205.75 qci3.aliyun.com

   **有些账号跟我们crm做了绑定，目前uat只有test3，test1留作未绑定的测试账号**

   **生产要怎么测，用哪些账号是要根据情况定的，阿里不一定给你多少账号，跟刘曜商量**

3. 工作空间应该如何运作

   1. 如果他账号没跟我们绑定，阿里云也可以跳转全域会员，只不过跳过来显示蒙层，工作空间显示为空
   2. 一个账号下面有多个工作空间，只绑定了一个，那么别的工作空间跳转过来显示蒙层
   3. 如果没绑定跳转过来不能显示报错（让前端拦截请求）

4. **受众包(很多坑)**

   1. 受众管理的上传，每天晚上12点跑定时任务，xxjob

   2. 如何搜索: http://192.168.2.11:8080/jobinfo

      1.  uat例子,选择qa模块，会展示一堆任务（**这个其实不用太关心，真的想知道可以问刘曜**）

         上传任务

         ![image-20210308154810699](/Users/xiangtingwei/Library/Application Support/typora-user-images/image-20210308154810699.png)

         下载任务

         ![image-20210308154838978](/Users/xiangtingwei/Library/Application Support/typora-user-images/image-20210308154838978.png)

   3. 下载

      1. 阿里的**受众管理**，**受众筛选**中，建立数据集（**数据集可以选在标签数据集，和行为数据集**），建立完成之后任务是每10s中自动下载

      2. 下载之后同步两个地方

         1. 会员标签管理

         2. 高级搜索的受众人群

         3. 实现逻辑，xxjob下载受众包

            1. 这个表里面有下载记录，状态是9代表下载成功

            ​	select * from t_qa_audience_download where sys_company_id=2 ORDER BY modified_date desc;

            2. 发送到mq中消费

            3. 消费完成同步es，受众包和标签都是同步es，但是es中的索引不一样，比如标签的索引叫 auto_label, 里面存了会员的membercode，查询的时候会再用membercode查其他索引

            4. **目前存在的问题，受众包之前的逻辑是写表的，现在变成写es了，所以功能我测的时候其实还没通**

               

            

            